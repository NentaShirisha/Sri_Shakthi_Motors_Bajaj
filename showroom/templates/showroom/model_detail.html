{% extends 'showroom/base.html' %}
{% block title %}Bajaj Bike Details | Sri Shakthi Motors Bajaj Kadthal{% endblock %}
{% block body_page %}model{% endblock %}
{% block content %}
<section id="modelDetail" class="grid" style="margin-top: 1.5rem; gap: 2.5rem;">
    <div class="card">
        <h2>Loading bike...</h2>
        <p>Please hold on while we fetch the specifications.</p>
    </div>
</section>

<section style="margin-top: 3rem;" class="grid">
    <div>
        <h2 style="margin-bottom: 1rem;">Gallery</h2>
        <div id="modelGallery" class="gallery-grid"></div>
    </div>
</section>

<section style="margin-top: 3rem;">
    <div class="section-header">
        <h2>Technical Specifications</h2>
        <p>Engine, chassis, and feature highlights for your chosen Bajaj</p>
    </div>
    <div id="specifications" class="bike-specs"></div>
    <div style="margin-top: 1.5rem;">
        <h3>Color Options</h3>
        <div id="colorOptions" class="badge-group"></div>
    </div>
</section>

<section style="margin-top: 3rem;" class="grid">
    <div>
        <h2>On-Road Price Overview</h2>
        <div id="priceBreakdown"></div>
    </div>
    <div class="emi-calculator">
        <h3>Plan Your EMI</h3>
        <p>Adjust loan amount, tenure, and interest to estimate your monthly outflow.</p>
        <form id="emiForm">
            <label for="loanAmount">Loan Amount (₹)</label>
            <input id="loanAmount" name="loanAmount" type="number" placeholder="150000">
            <label for="interestRate">Interest Rate (% per annum)</label>
            <input id="interestRate" name="interestRate" type="number" step="0.1" placeholder="9.5">
            <label for="loanTenure">Tenure (years)</label>
            <input id="loanTenure" name="loanTenure" type="number" placeholder="3">
        </form>
        <div class="emi-result" id="emiResult">—</div>
        <p style="font-size: 0.85rem; color: var(--color-muted);">*Illustrative EMI. Finance approvals subject to partner bank policies.</p>
    </div>
</section>

<section style="margin-top: 3rem;" class="grid">
    <div class="highlight-banner">
        <h3>Ready for a Test Ride?</h3>
        <p>Share your details and our relationship manager will confirm your slot instantly.</p>
        <form id="detailTestRideForm" method="post" action="{% url 'test_ride_submit' %}">
            {% csrf_token %}
            <label for="detailName">Name</label>
            <input id="detailName" name="name" type="text" required>
            <label for="detailPhone">Phone</label>
            <input id="detailPhone" name="phone" type="tel" required>
            <label for="detailEmail">Email</label>
            <input id="detailEmail" name="email" type="email" required>
            <label for="testRideInline">Preferred Variant</label>
            <select id="testRideInline" name="model">
                {% for bike in bike_choices %}
                <option value="{{ bike.slug }}" {% if bike.slug == page_slug %}selected{% endif %}>{{ bike.name }}</option>
                {% endfor %}
            </select>
            <label for="detailDate">Preferred Date</label>
            <input id="detailDate" name="date" type="date" required>
            <label for="detailTime">Preferred Time</label>
            <input id="detailTime" name="time" type="time" required>
            <button class="btn btn-secondary" type="submit">Confirm My Ride</button>
        </form>
    </div>
</section>
{% endblock %}
